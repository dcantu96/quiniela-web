<div class='container mx-auto overflow-x-auto' data-controller='searchable'>
  <div class='hidden md:flex flex-col pb-2'>
    <h3 class="text-sm uppercase text-gray-600 pb-2">User Time Zone <b><%= current_user.time_zone %></b><span class='ml-2 font-bold underline'><%= link_to 'Edit', edit_user_registration_path %></span></h3>
    <h4 class="text-sm uppercase text-gray-600"><%= Time.current.in_time_zone(current_user.time_zone).to_formatted_s(:long) %></h4>
  </div>
  <input type="text" class='input my-2 mx-2' placeholder="Search usernames" data-action="keyup->searchable#search">
  <div class='overflow-hidden' data-controller='infinite-scroll'>
    <div class='overflow-scroll h-screen w-full relative'>
      <table class='mb-2'>
        <thead>
          <tr>
            <th class="sticky z-40 left-0 top-0 p-3 font-bold text-sm uppercase bg-gray-300 text-gray-700 table-cell">Username</th>
            <% @matches.each_with_index do |match, index| %>
              <th class="sticky z-30 top-0 p-3 font-bold text-sm uppercase bg-gray-200 text-gray-600 table-cell">
                <%= match.visit_team.short_name %> @ <%= match.home_team.short_name %>
              </th>
            <% end %>
          </tr>
          <tr>
            <th class="p-3 sticky left-0 font-bold text-sm uppercase bg-gray-300 text-gray-700 table-cell">Show Time</th>
            <% @matches.each_with_index do |match, index| %>
              <th class="p-3 font-bold text-sm uppercase bg-gray-200 text-gray-600 table-cell">
                <span class="bg-blue-200 mt-1 px-2 py-1 text-xs uppercase block"><%= match.show_time.in_time_zone(current_user.time_zone).strftime("%a %H:%M")%></span>
              </th>
            <% end %>
          </tr>
        </thead>
        <tbody data-target='infinite-scroll.entries' id='table-rows'>
          <%= render 'members' %>
        </tbody>
      </table>
      <% if @pagy.pages > 1 %>
        <button data-action="click->infinite-scroll#loadMore" class='absolute bottom-0 left-0 btn btn--info w-full md:w-auto md:ml-3'>Load More</button>
      <% end %>
    </div>
    <div class='hidden' data-target='infinite-scroll.pagination' data-target='infinite-scroll.button'>
      <%== pagy_nav(@pagy) %>
    </div>
  </div>
</div>
